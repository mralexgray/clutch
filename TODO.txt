
TODO
==================================================
- Bottom Menu
	- Menu pretty screwy on opera - need some alignment and show/hide fixes for the submenus & arrows
- Need to validate the torrent upload stuff and report proper error messages
- Keep track of 'active' torrents in jscript controller for the torrent remove dialogue box.
- Get someone with some photoshop skills to fix up my crappy filter hover backgrounds :)
- Total up/down speed doesn't seem to update when all torrents are paused - still shows X KB/s
- Filtering by 'downloading', then pausing a torrent (thus removing it from the list), then clicking 'resume all' doesn't put the torrent back in the list - pause/resume all buttons not hooked into filtering properly.
- Report an error if the preferences download folder doesn't exist.
- Safari doesn't hide the 'confirm' button for 'alert' dialogs (ie 'an error occurred' box has 2 buttons, confirm & dismiss, confusing).
- Right-click menu is partially hidden if the torrent is near the bottom of the screen - need to be able to set a bounding box for the menu position
- Submitting a safari upload with no torrent file selected seems to hang the daemon intermittently.
- Think the torrent.js 'completed' percentage being displayed is wrong (a fraction of 99 instead of 100).
- Change javascript to use the percent_completed from the server rather than calculating it.
- Safari torrents aren't selectable after an upload.
- Safari doesn't handle $.ajax::error properly if a request fails.
- Alternating row colors don't update if a torrent is deleted 
- Individual torrent's 'nextTorrent' & 'prevTorrent' don't get updated correctly if a torrent is deleted (causes arrow keys to behave oddly)

- IMPORTANT: Must stop click events, so the links don't go through to #cancel, #save, w/e, as you end up with parse errors from webkit because of the non-existant stuffs I think. Either that, or something is wrong. big time.

OPTIMIZATIONS
==================================================
- Inspector
	- css cursor:pointer doesn't work on safari after a tab has been clicked for some reason.
- Scrollbar in firefox screws with the confirm dialog a little with small-width displays.
- Changing the port in the prefs isn't reflected in Clutch.app - not a big deal but maybe look at it sometime. (swe - server port and transmission port is different, and i doubt they should/can be the same, that what this line is talking about?)

CHECK
==================================================
- Sort by progress isn't working - is sorting by bytes completed which vary depending on the torrent size. 
- GUI doesn't seem to remember the sort order if you reload * my mistake *
- Search box currently only refreshing with he normal setInterval refreshes - doesn't do a request of it's own. Maybe try to figure out a better way to do this, but want to avoid sending a request every time the user hits a key, maybe with a timer or something to figure out when they've stopped typing.
- Do we need to put the PEX info in the inspector?
- Do we need to worry about the various 'remove files' options in the right-click menu? Also, I've removed the file location stuff from the inspector for now - do we need it?
- Where does 'Valid DL' come from for the inspector?
- What does 'Resume selected without wait' do?
- Do we need to worry about translations? I assume we do (the confirm dialog jscript messages might be a little fiddly to translate). Maybe we can initialise some translation constants in the JS files with ajax or something :S
- Is there a set 'remaining time unknown' time in transmission? currently set to 999 hours with jscript.
- Had a torrent wth ratio '.1' instead of '0.1' (although another one with '0.08' was working ok) - prob with the ratio formatting?
- Have to pass all the torrent IDs for ajax stuff now that filtering is implemented - stress test with a 100 or so torrents sometime to check that the GET string is not too long. May need to ajax POST.

IN THE FUTURE (?)
==================================================
- Get better 'unsupported browser' icons.
- Make 'Checking existing files' stuff use the orange bar from the latest transmission version.
- Arrow up/down scrolls the torrent window on safari - should try to scroll so the last selected torrent is always in view if possible
- Bottom Menu
	- Fix firefox flicker problem - not too bad now, going to be a fact of life until all the important stuff is done
	- clean up of the transmenu plugin (does the job for now but it can def be optimized)
	- clean all the crap out of the menu css (is all that extra div 'box & shadow' stuff really necessary for transmenu?)
- Add a loading indicator? Ajax requests could be quite bit long with  lot of torrents - need some indication that something is happening. * Everything seems fine response-time-wise for now, wait & see if this is necessary *
- IE support if possible.
- Maybe try getting torrent info on the server side in groups of 3/4/whatever-is-safe to try and speed things up a bit? Performance seems ok for the time being
- Clean up Clutch class once the structure gets a bit clearer- currently semi-duplicating GetTorrents(=getTorrentData) & MergeArraysById(=mergeTorrentData) functions for convenience + don't want to get rid of anything without confirming - must be a nicer way to do this getData/merge stuff but it's not obvious how to do it.

DONE
==================================================
- Opera page is too high if there are more torrents than can fit on one screen (ie you get 2 scrollbars, the torrent window scrollbar and the main page scrollbar)
- Display an error message if ajax requests fail (ie the server is down)
- There's a rogue </li> at the start of the torrent list - maybe what's causing the safari <ul> top-position problem?
- Alternating torrent background coloring doesn't seem to be working.
- Disable access for IE
- Safari search box vertical-alignment is a bit wacky
- Allow the user to set the download location somewhere (Clutch.app or webgui?), and use this directory when doing torrent uploads.
- Torrent upload form doesn't target the hidden iframe on safari - opens a new window.
- Revert preferences when the cancel button is clicked somehow
- Adding a torrent that's already downloading seems to hang everything - any ideas guys?
- Some display should happen while the torrent is processing 'resume' - stopping says 'Stopping...', should resume say 'checking existing files' or something? 
- Opera .htauth password box pops up every ajax request - almost impossible to fill out * Seems to be fixed - can't reproduce *
- Clutch.app freezes when i try to stop the daemon - /tmp/ .pid file never gets deleted, & i can't start the daemon again (daemon doesn't get killed). Have to rm /tmp/clutch* and re-run the daemon from xcode to restart. Could be a symptom of my laptop being a pile of shit - anyone else having this prob? Doesn't seem to start properly if it tries to kill a process that doesn't exist (ie if the daemon /tmp/ pid file exists but the associated process doesn't) - runs but i never get the top-menu bar item to start the daemon/webgui (hope this makes sense!) * pretty sure this is because of my old daemon binary + not being able to build the latest version *
- Style the filter buttons
- Handle "state":"checking" and "state":"waiting to checking" when the daemon starts - currently just says 'downloading'
- Remember Inspector and Filter open/closed state between sessions
- Sqlite db for prefs - refresh frequency, user login details, filter etc etc.* Unnecessary - the serialized prefs.txt is good enough
- Arrow button up/down seems to have probs after clicking a few filter buttons - think it's losing track of the order of torrents (also doesn't recognize newly uploaded torrents)
- Implement search box.
- Add torrents to the correct place in the sorted list after upload (ie return filtered torrent list rather than 1 torrent)
- Get up/down speed & stop seeding setting from the daemon at page load
- Torrent sorting (need to pass to filters too i guess).
- No MessageController function to set 'stop seeding at ratio' - unavailable
- Inspector
	- Make the whole inspector wider? Hash currently clipped
- Bottom Menu
	- Figure out how that blue-turtle button is supposed to work & implement it
	- server-side sqlite prefs to remember sort method etc?
	- Separators between menu sections
	- right-align sub-menu arrows
	- 'tick' for selected options
	- figure out variable-widths for different sub-menus * Looks ok the way it is *
- A lot of work to do on the context menu
	- Hook up the links
	- enable/disable menu options dynamically instead of all enable (not necessary at the moment because i took out all the file-related stuff... may need to put these menu options back in later if we can figure out how to support them?)
- Implement filter buttons.
	- Filtering doesn't seem to be working properly after a filtered pause/resume all - only a couple of torrents show up as paused.
	- Need to update the filter if torrents are paused - they should disappear from the list if 'seeding' or 'downloading' is selected
	- In addition to the above - need to update the filter every time torrents are refreshed - ie if a torrent completes and we are in the 'downloading' filter it should disappear from the list. If we are in the seeding filter and a downloaded torrent completes, it should appear in the list. Think we need to make the refreshTorrents() stuff a lot smarter - ie update torrents if they are in both the browser & remote lists, add them if they are in the remote list but not the browser list, and delete them if they are in the browser list but not in the remote list. (?)
- Fix up <UL> scrolling - seems to be a little wacky on different browsers. Ideally only have a scrollbar for the <ul> - (gimp's stuff is working great so far for the browsers we care about. Would be nice to have the list floating to the top so we can animate the filter bar open/close but no-one anywhere seems to have figured a top-floating 3-row layout yet - keep an eye out for new techniques but not a big deal). * Seems to be working fine *
- Inspector layout should be aligned better (would a table be best here? it *is* a table of values...) - Tried table layout but couldn't get all the widths to line up properly, plus couldn't get overflow ellipsis to work properly - label/div for now but maybe tables later * Seems to be working fine *
- Caching system? Don't refresh un-changing values, such as a torrents total size, or files (semi-done, need to handle unchanging values specifically in torrent.js->refresh() - keep in mind for future optimization). - *Not really compatible with the new dynamic filtering*
- Don't update paused torrents (unless we integrate the socket stuff into libT, Then maybe update paused torrents every couple updates or such? [probably shouldn't bother]) - (nice idea gimp, hadn't thought of it) - *Not really compatible with the new dynamic filtering*
- show/hide inspector should change right-click menu options (commented out until new jquery right-click menu is done)
- 'Remove from list' right-menu option remains highlighted after confirm screen in Safari.
- Torrent uploading.
- Right-click menu doesn't work in opera - NOT SUPPORTED (impossible in opera)
- torrent filtering broken since the change to jQuery 
- right-click context menu broken since the change to jQuery 
- Reset inspector when a torrent is removed (currently keeps the old torrent deails)
- Web interface loads too quickly when ./run-bin.command is run - requests torrent list before torrents are loaded - (thanks swe, works great - dave)
- Total up/down should show 'x.0' instead of just 'x' if it's an integer to match the desktop app.
- Implement torrent inspector.
- when multiple torrents are selected, deselecting one destroys the inspector, multiple torrents should instead show "multiple torrents selected", and the total filesize of the torrents
- A lot of the values can be stripped out (unnecessary stuff)
- Get a weird '-1 hours remaining' thing *very* occasionally - try to figure out why (dave)
- Torrent error messages aren't displaying (eg 'torrent not registered with this tracker') - just get 'Paused'.
- why does the following line of torrent.js erroring if uncommented? (SyntaxError - Parse Error)
	if (data.private)	this._private		= data.private;
- Major issues!!! <-- READ
	- BEncode classes run out of memory with large numbers of torrents (5+) :
	  Pretty sure this is a memory prob, getting :
	  	"httpd(14838) malloc: ***  Deallocation of a pointer not malloced: 0x3482f0; 
		This could be a double free(), or free() called with the middle of an allocated block; 
		Try setting environment variable MallocHelp to see tools to help debug"
	  possibly garbage collection clearing stuff we're using because everything is taking so long (random guess)?
	- We need it to not ask for all data at once, but instead first get info all and *just* grab the torrent ids, then from there, make a request for each id's data. Asking for all at once either gives problems with the socket, or php runs out of memory.
- Arrow-Key still doesnt't work 100% - click an element near the bottom and then apple-click the first torrent in the list and press up. Same for the down key.
- Right-Click - constrain the menu so it doesn't go outside the borders of the screen or under the scrollbar
- Right-Click - Figure out which torrent is underneath the click position (Unnecessary)
- Right-Click - Allow click event through to the torrent so it behaves correctly when you right-click on unselected torrents
- 'Pause Selected' and 'Resume Selected' affect every torrent if nothing is selected.
- Inspector needs tabs (Info - Activity - Files)
- Only grab new information (speeds / peers)
- OnClick image change for all buttons (surrently don't have the graphics).
- The per-torrent reveal-in-finder button doesn't make much sense in a browser - should this be dropped or changed to something else (maybe a torrent details button?). Would be good to try & keep the interface buttons consistent between the desktop & web if at all possible. (Just the pause/resume button for now)
- How are the downloading from/to and seeding to numbers calculated? (peers_from, peers_downloading, peers_uploading, peers_total) Is the way it's being displayed at the moment correct? (Looks OK)
- Last change seems to have broken Safari - figure out why (gimp - float is a reserved word)
- Multi-GB torrents can have greater than 2147483647 bytes, making them hit 100% early (gimp - changed from int to float).
- Figure out a way to convert an array into something that can be accepted by func_get_args(), as this is used all over the place. Passing an array seems to result in just one argument (the array) instead of lots (the strings in the array). Tried using a combo of eval & implode but doesn't seem to work. (gimp - fixed messageclass to accept an array argument instead of list)
- Pausing torrents works ok but resuming seems to timeout, comes back eventually with the message 'This program has encountered an error and will now exit.'. The torrent gets restarted almost straight away so it's working at some level. (gimp - made messageclass not listen for response)
- Serializer doesn't accept booleans, so the MessageController::AddFileDetailed class breaks sending the 'autocomplete' argument. Changed to an int for now with intval() - gimp/swe are there any probs doing this? I don't know anything about the serializer but i guess it should be ok [ Serializer now accepts booleans. It automatically converts to int ]
